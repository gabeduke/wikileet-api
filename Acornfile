containers: {
    web: {
        image: "dukeman/wikileet"
        build: "."
        ports: {
            publish: "8080/http"
        }
        annotations: {
            "external-dns.alpha.kubernetes.io/hostname": "web.wikileet.leetserve.com"
            "kubernetes.io/ingress.class":               "traefik"
            "ingress.kubernetes.io/ssl-redirect":        "true"
            "cert-manager.io/cluster-issuer":            "letsencrypt-prod"
        }
        env: {
            WIKILEET_DATABASE_DBNAME:   "gorm"
            WIKILEET_DATABASE_HOST:     "db"
            WIKILEET_DATABASE_USER:     "postgres"
            WIKILEET_DATABASE_PASSWORD: "secret://wikileet-db/token"
        }
    }
    db: {
        image: "postgres:alpine"
        env: {
            POSTGRES_DB:       "gorm"
            POSTGRES_USER:     "postgres"
            POSTGRES_PASSWORD: "secret://wikileet-db/token"
        }
        ports: "5432/tcp"
    }
}
secrets: {
    "wikileet-db": {
        type: "token"
    }
}
